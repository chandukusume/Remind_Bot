version: "3.1"

stories:
# In data/stories.yml

- story: Full form tracking flow (happy path)
  steps:
  - intent: greet
  - action: utter_greet
  - intent: track_form
    entities:
    - sheet_id: "1abcxyz1234567890"
  - slot_was_set:
    - sheet_id: "1abcxyz1234567890"
  - action: action_track_form  # Corrected this to be the custom action
  - intent: get_count
  - action: action_get_count   # This now directly follows the intent
  - intent: send_reminder
  - action: action_send_reminder # Corrected this to be the custom action
  - intent: goodbye
  - action: utter_goodbye

- story: User asks for count before a form is set
  steps:
  - intent: greet
  - action: utter_greet
  - intent: get_count
  - action: action_get_count   # The action itself will handle the 'not set' case
  - intent: track_form
    entities:
    - sheet_id: "xyz987abc"
  - slot_was_set:
    - sheet_id: "xyz987abc"
  - action: action_track_form # Corrected this to be the custom action
  - intent: get_count
  - action: action_get_count   # This now directly follows the intent
  - intent: goodbye
  - action: utter_goodbye

- story: User sets form and then checks it
  steps:
  - intent: start
  - action: utter_start
  - intent: track_form
    entities:
    - sheet_id: "form-to-check-123"
  - slot_was_set:
    - sheet_id: "form-to-check-123"
  - action: utter_track_form
  - intent: check_current_form
  - action: utter_check_current_form

- story: Mixed university and form questions
  steps:
  - intent: greet
  - action: utter_greet
  - intent: inquire_admission_requirements
  - action: utter_inquire_admission_requirements
  - intent: track_form
    entities:
    - sheet_id: "some_other_form_id"
  - slot_was_set:
    - sheet_id: "some_other_form_id"
  - action: utter_track_form
  - intent: get_academic_calendar
  - action: utter_get_academic_calendar
  - intent: check_current_form
  - action: utter_check_current_form
  - intent: goodbye
  - action: utter_goodbye

- story: Interactive university questions
  steps:
  - intent: greet
  - action: utter_greet
  - intent: ask_about_clubs
  - action: utter_ask_about_clubs
  - intent: find_location
    entities:
    - building_name: "student union"
  - action: utter_find_location
  - intent: ask_about_scholarships
  - action: utter_ask_about_scholarships